.email-signup
  margin-top: 1.5rem
  padding: 1rem 1.15rem
  border-radius: 14px
  border: 1px solid rgba($color-border, .6)
  background: linear-gradient(165deg, rgba(lighten($color-background, 8%), .96), rgba($color-background-code, .9))
  color: $color-text
  position: relative
  overflow: hidden
  box-shadow: 0 12px 30px rgba(#000, .45), 0 0 0 1px rgba($color-border, .3) inset

  &:before
    content: ''
    position: absolute
    inset: 0
    background: radial-gradient(circle at 15% 20%, rgba($color-accent-1, .2), transparent 55%), radial-gradient(circle at 80% 0, rgba($color-link, .12), transparent 65%)
    opacity: .8
    pointer-events: none

  &--sidebar
    margin-top: 0

  &--inline,
  &--modal
    padding: 1.1rem 1.1rem 1rem
    border-radius: 12px
    border: 1px solid rgba($color-border, .75)
    background: rgba($color-background, .98)
    box-shadow: 0 18px 40px rgba(#000, .32)

    &:before
      display: none

    .email-signup__title
      margin-bottom: .3rem
      color: $color-text
      letter-spacing: 0
      text-transform: none
      font-size: 1rem
      font-weight: 600

    .email-signup__description
      color: rgba($color-text, .72)
      font-size: .92rem
      line-height: 1.45

    .email-signup__form
      gap: .55rem
      margin-top: .75rem

    .email-signup__input
      border-radius: 10px
      background: rgba($color-background-code, .6)
      font-family: $font-family-body

    .email-signup__button
      border-radius: 10px
      background: $color-link
      color: $color-background
      text-transform: none
      letter-spacing: 0
      box-shadow: none

      &:hover
        transform: none
        background: darken($color-link, 10%)
        box-shadow: none

      &:focus
        box-shadow: 0 0 0 2px rgba($color-link, .28)

  &--modal
    margin: 0
    width: calc(100vw - 2rem)
    max-width: 560px
    max-height: calc(100vh - 2rem)
    overflow: auto
    z-index: 2

  > *
    position: relative
    z-index: 1

  &__title
    margin-top: 0
    margin-bottom: .25rem
    color: $color-accent-2
    letter-spacing: .03em
    text-transform: uppercase
    font-size: .9rem

  &__description
    margin-top: 0
    color: $color-meta
    font-size: .85rem

  &__form
    display: flex
    flex-wrap: wrap
    gap: .45rem
    margin-top: .65rem

  &__input
    flex: 1
    min-width: 180px
    padding: .45rem .6rem
    border-radius: 8px
    border: 1px solid rgba($color-border, .65)
    background: rgba($color-background, .78)
    color: $color-text
    font-family: $font-family-mono
    font-size: .85rem
    transition: border-color .2s ease, box-shadow .2s ease, background .2s ease

    &::placeholder
      color: rgba($color-text, .5)

    &:focus
      outline: none
      border-color: $color-accent-1
      box-shadow: 0 0 0 2px rgba($color-accent-1, .2)
      background: rgba($color-background, .95)

  &__button
    padding: .5rem 1rem
    border-radius: 8px
    border: none
    background: linear-gradient(125deg, $color-accent-1, lighten($color-link, 5%))
    color: $color-background
    font-weight: 700
    letter-spacing: .05em
    text-transform: uppercase
    cursor: pointer
    box-shadow: 0 10px 22px rgba($color-accent-1, .3)
    transition: transform .15s ease, box-shadow .15s ease, background .2s ease

    &:hover
      transform: translateY(-2px)
      box-shadow: 0 16px 28px rgba($color-accent-1, .35)

    &:focus
      outline: none
      box-shadow: 0 0 0 2px rgba($color-link, .35), 0 16px 28px rgba($color-accent-1, .35)

.email-signup-modal
  position: fixed
  inset: 0
  display: flex
  align-items: center
  justify-content: center
  z-index: 999
  padding: 1rem
  opacity: 0
  visibility: hidden
  pointer-events: none
  transition: opacity .2s ease

  &.is-visible
    opacity: 1
    visibility: visible
    pointer-events: auto

  &__backdrop
    position: absolute
    inset: 0
    background: rgba(#000, .42)
    backdrop-filter: blur(1px)

  &__close
    position: absolute
    top: .45rem
    right: .45rem
    width: 2rem
    height: 2rem
    border: none
    border-radius: 999px
    background: transparent
    color: rgba($color-text, .65)
    font-size: 1.2rem
    line-height: 1
    cursor: pointer
    z-index: 3

    &:hover
      background: rgba($color-border, .22)
      color: $color-text

    &:focus
      outline: none
      box-shadow: 0 0 0 2px rgba($color-link, .28)


.post-layout
  display: flex
  align-items: flex-start
  gap: 0
  position: relative

.post-sidebar
  flex: 0 0 auto
  width: 0
  margin: 0
  padding: 0
  position: sticky
  top: 4.5rem
  align-self: flex-start

.post-main
  flex: 1
  min-width: 0
  width: 100%

.post-sidebar .email-signup
  width: 150px
  transform: translateX(calc(-100% - 1.2rem))
  margin-top: 0
  margin-bottom: 0

@media (max-width: 540px)
  .email-signup
    padding: 1.5rem

    &__form
      flex-direction: column
      gap: .5rem

    &__button
      width: 100%

@media (max-width: 1040px)
  .post-layout
    flex-direction: column

  .post-sidebar
    position: static
    width: 100%
    margin-bottom: 1rem

  .post-sidebar .email-signup
    width: 100%
    transform: none
    margin-top: 1rem
